matrix:
  include:
    - language: python
      python: 3.7
      script:
        - python -m unittest python_runner/tests/runner_test.py

    - language: python
      python: 3.8
      script:
        - python -m unittest python_runner/tests/runner_test.py

    - language: groovy
      before_script:
        - ./gradlew assemble
      script:
        - ./gradlew test

    # Generate docker images (only if modified)
    - language: ptyhon
      python: 3.8
      before_install:
        - git diff --name-only $TRAVIS_COMMIT_RANGE
        - |
          count=`git diff --name-only $TRAVIS_COMMIT_RANGE | sort -u | uniq | grep docker_images | wc -l`
          if [ $count -ne 0 ]
          then
            echo "Build docker images"
          else
            echo "No docker image to build"
            travis_terminate 0
          fi
      script:
        - echo "Building docker images"